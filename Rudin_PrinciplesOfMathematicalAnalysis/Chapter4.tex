\documentclass{article}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{commath}
\usepackage{hyperref}
\usepackage[none]{hyphenat}
\usepackage{mathrsfs}
\usepackage{physics}
\parindent=0pt

\def\upint{\mathchoice%
    {\mkern13mu\overline{\vphantom{\intop}\mkern7mu}\mkern-20mu}%
    {\mkern7mu\overline{\vphantom{\intop}\mkern7mu}\mkern-14mu}%
    {\mkern7mu\overline{\vphantom{\intop}\mkern7mu}\mkern-14mu}%
    {\mkern7mu\overline{\vphantom{\intop}\mkern7mu}\mkern-14mu}%
  \int}
\def\lowint{\mkern3mu\underline{\vphantom{\intop}\mkern7mu}\mkern-10mu\int}

\begin{document}

\textbf{\Large Chapter 4: Continuity} \\\\



\emph{Author: Meng-Gen Tsai} \\
\emph{Email: plover@gmail.com} \\\\



% http://my.fit.edu/~awelters/Teaching/2017/Fall/HW4SolnsFall2017MTH4101&5101.pdf
% https://www.math.purdue.edu/~dgarofal/hmw9(MA504).pdf
% https://carma.newcastle.edu.au/resources/jon/Preprints/Books/CUP/CUPold/np-convex.pdf



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.1.}
\emph{Suppose $f$ is a real function define on $\mathbb{R}^1$ which satisfies
$$\lim_{h \to 0}[f(x+h)-f(x-h)] = 0$$
for every $x \in \mathbb{R}^1$.
Does this imply that $f$ is continuous?} \\

\emph{Proof.}
$\lim_{h \to 0}[f(x+h)-f(x-h)] = 0$ holds if $f$ is continuous.
But the converse of this statement and is not true.
For example, define $f: \mathbb{R}^1 \to \mathbb{R}^1$ by
\begin{equation*}
  f(x) =
    \begin{cases}
      1 & (x = 0), \\
      0 & (x \neq 0).
    \end{cases}
\end{equation*}
$f$ is not continuous at $x = 0$ but
$$\lim_{h \to 0}[f(x+h)-f(x-h)] = 0$$ for any $x \in \mathbb{R}^1$.
(The identity holds for $x \neq 0$ since $f$ is continuous on $\mathbb{R}^1 - \{0\}$.
Besides, $\lim_{h \to 0}[f(0+h)-f(0-h)] = \lim_{h \to 0}[0 - 0] = 0$.)
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.2.}
\emph{If $f$ is a continuous mapping of a metric space $X$
into a metric space $Y$,
prove that $f(\overline{E}) \subseteq \overline{f(E)}$
for every set $E \subseteq X$.
($\overline{E}$ denotes the closure of $E$.)
Show, by an example, that $f(\overline{E})$ can be a proper subset of $\overline{f(E)}$.} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
Since $f$ is continuous and $\overline{f(E)}$ is closed,
$f^{-1}(\overline{f(E)})$ is closed.
Hence,
\begin{align*}
f^{-1}(\overline{f(E)})
&\supseteq f^{-1}(f(E))
  & \text{(Monotonicity of $f^{-1}$)} \\
&\supseteq E,
  & \text{(Note in Theorem 4.14)} \\
\overline{E}
&\subseteq f^{-1}(\overline{f(E)}),
  & \text{(Monotonicity of closure)} \\
f(\overline{E})
&\subseteq f(f^{-1}(\overline{f(E)}))
  & \text{(Monotonicity of $f$)} \\
&\subseteq \overline{f(E)}.
  & \text{(Note in Theorem 4.14)}
\end{align*}
\item[(2)]
Let $f: (0, \infty) \to \mathbb{R}$ be a continuous function
defined by $$f(x) = \frac{1}{x}.$$
Consider $E = \mathbb{Z}^+ \subseteq (0, \infty)$.
Then $f(E) = \left\{ \frac{1}{n} : n \in \mathbb{Z}^+ \right\}$,
and thus
\begin{align*}
  f(\overline{E})
  &= \left\{ \frac{1}{n} : n \in \mathbb{Z}^+ \right\}. \\
  \overline{f(E)}
  &= \left\{ \frac{1}{n} : n \in \mathbb{Z}^+ \right\} \bigcup \{0\}.
\end{align*}
\end{enumerate}
$\Box$ \\



\textbf{Supplement (Inverse image).}
\begin{enumerate}
\item[(1)]
\emph{$E \subseteq f^{-1}[f(E)]$ for $E \subseteq X$.}
\begin{align*}
  \forall \: x \in E
  &\Longrightarrow
  f(x) \in f(E)
    & \\
  &\Longleftrightarrow
  x \in f^{-1}[f(E)].
    &\text{(Definition of the inverse image)}
\end{align*}
$\Box$ \\
\item[(2)]
\emph{$f[f^{-1}(E)] \subseteq E$ for $E \subseteq Y$.}
\begin{align*}
  \forall \: y \in f[f^{-1}(E)]
  &\Longleftrightarrow
  \exists \: x \in f^{-1}(E) \text{ such that } y = f(x) \\
  &\Longleftrightarrow
  \exists \: x, f(x) \in E \text{ such that } y = f(x) \\
  &\Longrightarrow
  \exists \: x, y = f(x) \in E.
\end{align*}
$\Box$ \\
\end{enumerate}



\textbf{Supplement (Continuity).}
\emph{Let $f$ be a map from a topological space on $X$
to a topological space on $Y$.
Then, the following statements are equivalent:}
\begin{enumerate}
\item[(1)]
\emph{$f$ is continuous:
For each $x \in X$ and every neighborhood $V$ of $f(x)$,
there is a neighborhood $U$ of $x$ such that $f(U) \subseteq V$.}
\item[(2)]
\emph{For every open set $O$ in $Y$, the inverse image $f^{-1}(O)$
is open in $X$.}
\item[(3)]
\emph{For every closed set $C$ in $Y$, the inverse image $f^{-1}(C)$
is closed in $X$.}
\item[(4)]
\emph{$f(A)^{\circ} \subseteq f(A^{\circ})$ for every subset $A$ of $X$.}
\item[(5)]
\emph{$f^{-1}(B^{\circ}) \subseteq (f^{-1}(B))^{\circ}$ for every subset $B$ of $Y$.}
\item[(6)]
\emph{$f(\overline{A}) \subseteq \overline{f(A)}$ for every subset $A$ of $X$.}
\item[(7)]
\emph{$\overline{f^{-1}(B)} \subseteq f^{-1}(\overline{B})$ for every subset $B$ of $Y$.} \\\\
\end{enumerate}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.3.}
\emph{Let $f$ be a continuous real function on a metric space $X$.
Let $Z(f)$ (the zero set of $f$) be the set of all $p \in X$ at which $f(p) = 0$.
Prove that $Z(f)$ is closed.} \\

\emph{Proof (Corollary to Theorem 4.8).}
Since $f$ is continuous, $f^{-1}(\{0\}) = Z(f)$ is closed in $X$
for a closed subset $\{0\}$ in $\mathbb{R}^1$.
$\Box$ \\

Denote the complement of any set $E$ by $\widetilde{E}$. \\

\emph{Proof (Theorem 4.8).}
Consider the complement of $Z(f)$ in $X$,
\begin{align*}
\widetilde{Z(f)}
&= \{ x \in X : f(x) \neq 0 \} \\
&= f^{-1}((-\infty, 0) \cup (0, \infty)).
\end{align*}

Since $f$ is continuous, $f^{-1}((-\infty, 0) \cup (0, \infty)) = \widetilde{Z(f)}$
is open in $X$ for a open subset $(-\infty, 0) \cup (0, \infty)$ in $\mathbb{R}^1$.
$\Box$ \\

\emph{Proof (Definition 2.18(d)).}
Given any limit point $p$ of $Z(f)$.
\emph{Show that $f(p) = 0$ or $p \in Z(f)$.}
Since $f$ is continuous, given any $\varepsilon > 0$ there exists a $\delta > 0$
such that $|f(x) - f(p)| < \varepsilon$ for all $x \in X$ for which $d_X(x, p) < \delta$.
Since $p$ is a limit point of $Z(f)$, for such $\delta > 0$ we have a point $q \neq p$
such that $q \in Z(f)$, or $f(q) = 0$. So $|f(p)| < \varepsilon$ for any $\varepsilon > 0$.
$f(p) = 0$.
$\Box$ \\

\emph{Proof (Definition 2.18(f)).}
Consider the complement of $Z(f)$ in $X$,
$$\widetilde{Z(f)} = \{ x \in X : f(x) \neq 0 \} = \{f > 0\} \cup \{f < 0\}$$
where $\{f > 0\} = \{ x \in X : f(x) > 0 \}$ and $\{f < 0\} = \{ x \in X : f(x) < 0 \}$.
It suffices to show $\{f > 0\}$ is open. ($\{f < 0\}$ is similar.)
Given any point $p$ of $\{f > 0\}$ or $f(p) > 0$.
\emph{Want to show $p$ is an interior point of $\{f > 0\}$.}
Since $f$ is continuous, given any $\varepsilon = \frac{f(p)}{2} > 0$
there exists a $\delta > 0$
such that $|f(x) - f(p)| < \frac{f(p)}{2}$ for all $x \in X$ for which $d_X(x, p) < \delta$.
For such $x$ with $d_X(x, p) < \delta$ we have
$$\frac{1}{2}f(p) < f(x) < \frac{3}{2}f(p).$$
That is, $N = \{ x : d_X(x, p) < \delta \}$ is a neighborhood $p$ such that
$N \subseteq \{f > 0\}$.
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.4.}
\emph{Let $f$ and $g$ be continuous mappings of a metric space $X$ into a metric space $Y$,
and let $E$ be a dense subset of $X$.
Prove that $f(E)$ is dense in $f(X)$.
If $g(p) = f(p)$ for all $p \in E$, prove that $g(p) = f(p)$ for all $p \in X$.
(In other words, a continuous mapping is determined by
its values on a dense subset of its domain.)} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
\emph{Show that $f(E)$ is dense in $f(X)$.}
It suffices to show that every point $y \in f(X)-f(E)$ is a limit point of $f(E)$.
Since $y \in f(X)-f(E)$, there exists a point $x \in X-E$ such that $y = f(x)$.
Since $E$ is dense in $X$, there exists a sequence $\{x_n\}$ in $E$ such that
$x_n \to x$ as $n \to \infty$.
Let $y_n = f(x_n) \in f(E)$.
Take limit and use the continuity of $f$,
$y_n \to y$ as $n \to \infty$, or $y$ is a limit point of $f(E)$.
\item[(2)]
\emph{Show that $g(p) = f(p)$ for all $p \in X$ if $g(p) = f(p)$ for all $p \in E$.}
It suffices to show $g(p) = f(p)$ for all $p \in X-E$.
Given any $p \in X-E$, there exists a sequence $\{p_n\}$ in $E$ such that
$p_n \to p$ as $n \to \infty$.
Notice that $g(p_n) = f(p_n)$ by the assumption.
Take limit and use the continuity of $f$ and $g$,
$g(p) = f(p)$ for $p \in X-E$.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.5.}
\emph{If $f$ is a real continuous function defined on a closed set $E \subseteq \mathbb{R}^1$,
prove that there exist continuous real function $g$ on $\mathbb{R}^1$ such that
$g(x) = f(x)$ for all $x \in E$.
(Such functions $g$ are called \textbf{continuous extensions} of $f$ from $E$ to $\mathbb{R}^1$.)
Show that the result becomes false if the word ``closed'' is omitted.
Extend the result to vector valued functions.
(Hint: Let the graph of $g$ be a straight line on each of the segments
which constitute the complement of $E$
(compare Exercise 2.29).
The result remains true if $\mathbb{R}^1$ is replaced by any metric space,
but the proof is not so simple.) } \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
Every open set in $\mathbb{R}^1$ is the union of an at most countable collection
of disjoint segments (Exercise 2.29).
\item[(2)]
We need to construct a continuous real function on the complement of $E$.
By (1), write $\widetilde{E} = \bigcup_{i \in \mathscr{C}} (a_i, b_i)$
where $\mathscr{C}$ is at most countable and
$a_i < b_i$. ($a_i, b_i$ could be $\pm \infty$.)
Define $g(x)$ by
\begin{equation*}
  g(x) =
    \begin{cases}
      f(x)
        & (x \in E), \\
      f(a_i) + \frac{f(b_i)-f(a_i)}{b_i-a_i}(x - a_i)
        & (x \in (a_i, b_i):\text{finite interval}), \\
      f(a_i)
        & (x \in (a_i, b_i): a_i:\text{finite}, b_i = +\infty), \\
      f(b_i)
        & (x \in (a_i, b_i): a_i = -\infty, b_i:\text{finite}), \\
      0
        & (x \in (a_i, b_i): a_i = -\infty, b_i = +\infty).
    \end{cases}
\end{equation*}
\emph{Show that $g$ is continuous in $\mathbb{R}^1$,}
or show that $g(x)$ is continuous at $x = p$ for any point $p \in \mathbb{R}^1$.
\begin{enumerate}
  \item[(a)]
  Given a point $p \in \widetilde{E}$. There is an open interval $I = (a_i, b_i)$
  such that $p \in I$.
  Since the graph of $g$ in an open interval $I$ is a straight line,
  $g$ is continuous at $x = p$.
  \item[(b)]
  Given an isolated point $p \in E$.
  There are two open intervals $I = (a_i, b_i)$ and $J = (a_j, b_j)$
  such that $b_i = p = a_j$.
  So $\lim_{x \to p^{-}} g(x) = \lim_{x \to p^{+}} g(x) = f(p)$
  by the construction of $g$, which says $g$ is continuous at $x = p$.
  \item[(c)]
  Given a limit point $p \in E$. So that $g(p) = f(p)$.
  Given $\varepsilon > 0$.
  Consider $\lim_{x \to p^{+}} g(x)$ first.
  (The case $\lim_{x \to p^{-}} g(x)$ is similar.)
    \begin{enumerate}
    \item[(i)]
    For such $\varepsilon > 0$, there is a $\delta' > 0$ such that
    $$f(p)-\varepsilon < f(x) < f(p)+\varepsilon$$
    whenever
    $$x \in E \text{ and } p < x < \delta'.$$
    Since $p$ is a limit point of $E$,
    there is a point $q \neq p$ such that $|q - p| < \delta'$.
    Might assume that $q > p$, and then retake $\delta = \min\{\delta', q-p\} > 0$.
    (If no such $q$, $\lim_{x \to p^{+}} g(x) = f(p)$ trivially.)
    \item[(ii)]
    For any $x$ such that $p < x < q$,
    consider $x \in E$ or else $x \in \widetilde{E}$.
    As $x \in E$, nothing to do by (i).
    \item[(iii)]
    As $x \in \widetilde{E}$, there exists an open interval $I = (a_i, b_i)$
    such that $x \in I \subseteq (p,q)$.
    Therefore,
    $$f(a_i) \leq g(x) \leq f(b_i) \text{ or }
    f(a_i) \geq g(x) \geq f(b_i).$$
    By (i),
    \begin{align*}
      f(p) - \varepsilon &< f(a_i) < f(p) + \varepsilon \text{ and } \\
      f(p) - \varepsilon &< f(b_i) < f(p) + \varepsilon, \\
      f(p) - \varepsilon < f(a_i) &\leq g(x) \leq f(b_i) < f(p) + \varepsilon \text{ or } \\
      f(p) - \varepsilon < f(b_i) &\leq g(x) \leq f(a_i) < f(p) + \varepsilon.
    \end{align*}
    \end{enumerate}
  Hence, given $\varepsilon > 0$
  there is a $\delta > 0$ such that
  $|g(x) - g(p)| < \varepsilon$ whenever $p < x < \delta$ (and $x \in \mathbb{R}^1$),
  or $\lim_{x \to p^{+}} g(x) = g(p)$.
  \end{enumerate}
\item[(3)]
Consider $f(x) = \log(x)$ in $(0, \infty)$.
Since $\lim_{x \to 0} f(x) = -\infty$,
we cannot find any real continuous function $g$ defined on $x = 0$.
\item[(4)]
For a vector-valued function
$\mathbf{f} = (f_1, \ldots, f_k)$,
with each $f_i$ is continuous on a closed set $E \subseteq \mathbb{R}^1$,
extend $f_i$ to a continuous function $g_i$ on $\mathbb{R}^1$ as (2).
Put $\mathbf{g} = (g_1, \ldots, g_k)$.
Clearly $\mathbf{g}$ is an extension of $\mathbf{f}$.
Besides, $\mathbf{g}$ is continuous in $\mathbb{R}^1$ by Theorem 4.10.
\end{enumerate}
$\Box$ \\



\textbf{Supplement (Tietze's Extension Theorem).}
\emph{If $X$ is a normal topological space and
$f: A \to \mathbb{R}$ is a continuous map
from a closed subset $A$ of $X$ into the real numbers carrying the standard topology,
then there exists a continuous map
$g: X \to \mathbb{R}$ with $g(a) = f(a)$ for all $a \in A$.} \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.6.}
\emph{If $f$ is defined on $E$, the graph of $f$ is the set of points $(x,f(x))$,
for $x \in E$.
In particular, if $E$ is a set of real numbers, and $f$ is real-valued,
the graph of $f$ is a subset of the plain.
Suppose $E$ is compact, and prove that that $f$ is continuous on $E$
if and only if its graph is compact.} \\

\emph{Proof.}
Let $G = \{ (x,f(x)) : x \in E\}$ be the graph of $f$.
\begin{enumerate}
\item[(1)]
$(\Longrightarrow)$
Let $\mathbf{f}: E \to G$ defined by
$$\mathbf{f}(x) = (x,f(x)).$$
$\mathbf{f}(E) = G$ exactly.
Since $f$ and $x$ are continuous in $E$, $\mathbf{f}$ is continuous (Theorem 4.10).
As $E$ is compact, $\mathbf{f}(E)$ is compact (Theorem 4.14).
\item[(2)]
$(\Longleftarrow)$
Let $\pi: G \to E$ be a projection map defined by
$$\pi(x, f(x)) = x.$$
Notice that $\pi \circ \mathbf{f} = \text{id}_E$ and
$\mathbf{f} \circ \pi = \text{id}_G$.
Besides,
$\pi$ is a continuous one-to-one mapping of a compact set $G$ onto $E$.
Then the inverse mapping $\pi^{-1} = \mathbf{f}$
is a continuous mapping of $E$ onto $G$ (Theorem 4.17).
So $f$ is continuous (Theorem 4.10).
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.7.}
\emph{If $E \subseteq X$ and if $f$ is a function defined on $X$,
the \textbf{restriction} of $f$ to $E$ is the function $g$ whose domain of definition is $E$,
such that $g(p) = f(p)$ for $p \in E$.
Define $f$ and $g$ on $\mathbb{R}^2$ by:}
\begin{equation*}
  f(x,y) =
  \begin{cases}
    0                    & \text{if $(x,y) = (0,0)$} \\
    \frac{xy^2}{x^2+y^4} & \text{if $(x,y) \neq (0,0)$},
  \end{cases}
\end{equation*}
\begin{equation*}
  g(x,y) =
  \begin{cases}
    0                    & \text{if $(x,y) = (0,0)$} \\
    \frac{xy^2}{x^2+y^6} & \text{if $(x,y) \neq (0,0)$},
  \end{cases}
\end{equation*}
\emph{Prove that $f$ is bounded on $\mathbb{R}^2$,
that $g$ is unbounded in every neighborhood of $(0,0)$,
and that $f$ is not continuous at $(0,0)$;
nevertheless, the restrictions of both $f$ and $g$ to every straight line
in $\mathbb{R}^2$ are continuous!} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
\emph{Show that $f$ is bounded on $\mathbb{R}^2$.}
\begin{align*}
  (|x| - |y^2|)^2 \geq 0
  &\Longleftrightarrow
  |x|^2 - 2|x||y^2| + |y^2|^2 \geq 0 \\
  &\Longleftrightarrow
  |x|^2 + |y^2|^2 \geq 2|x||y^2| \\
  &\Longleftrightarrow
  |x^2 + y^4| \geq 2|xy^2| \\
  &\Longrightarrow
  \frac{1}{2} \geq \abs{ \frac{xy^2}{x^2+y^2} } \text{ whenever } (x,y) \neq (0,0) \\
  &\Longrightarrow
  |f(x,y)| \leq \frac{1}{2} \text{ whenever } (x,y) \neq (0,0).
\end{align*}
Note that $f(0,0) = 0 \leq \frac{1}{2}$.
Hence $f$ is bounded by $\frac{1}{2}$ on $\mathbb{R}^2$.

\item[(2)]
\emph{Show that $g$ is unbounded in every neighborhood of $\mathbb{R}^2$.}
Consider
a sequence $\{\mathbf{p}_n\}_{n \geq 1} \subseteq \mathbb{R}^2$
\[
  \mathbf{p}_n
  = (x_n, y_n)
  = \left( \frac{1}{n^3}, \frac{1}{n} \right)
\]
such that $\mathbf{p}_n \neq \mathbf{0}$ and $\lim \mathbf{p}_n = \mathbf{0}$.
Thus,
\[
  \lim_{n \to \infty} g(\mathbf{p}_n)
  = \lim_{n \to \infty} \frac{ x_n y_n^2 }{ x_n^2 + y_n^6 }
  = \lim_{n \to \infty} \frac{ (\frac{1}{n^3}) (\frac{1}{n})^2 }
    { (\frac{1}{n^3})^2 + (\frac{1}{n})^6 }
  = \lim_{n \to \infty} \frac{n}{2}
  = \infty.
\]
Hence $g$ is unbounded in every neighborhood of $\mathbb{R}^2$.

\item[(3)]
\emph{Show that $f$ is not continuous at $(0,0)$.}
Consider
a sequence $\{\mathbf{p}_n\}_{n \geq 1} \subseteq \mathbb{R}^2$
\[
  \mathbf{p}_n
  = (x_n, y_n)
  = \left( \frac{1}{n^2}, \frac{1}{n} \right)
\]
such that $\mathbf{p}_n \neq \mathbf{0}$ and $\lim \mathbf{p}_n = \mathbf{0}$.
Thus,
\[
  \lim_{n \to \infty} f(\mathbf{p}_n)
  = \lim_{n \to \infty} \frac{ x_n y_n^2 }{ x_n^2 + y_n^4 }
  = \lim_{n \to \infty} \frac{ (\frac{1}{n^2}) (\frac{1}{n})^2 }
    { (\frac{1}{n^2})^2 + (\frac{1}{n})^4 }
  = \frac{1}{2}.
\]
So, $\lim f(\mathbf{p}_n) = \frac{1}{2} \neq 0$.
By Theorem 4.6, $f$ is not continuous at $(0,0)$.

\item[(4)]
\emph{The restrictions of $f$ to every straight line
in $\mathbb{R}^2$ is continuous.}
  \begin{enumerate}
  \item[(a)]
  \emph{The line $L_{\infty} = \{(0,y) : y \in \mathbb{R} \}$.}
  Hence $f|_{L_{\infty}}(x,y) = 0$ for all $(x,y) \in L_{\infty}$
  (including $(0,0) \in L_{\infty}$).
  Therefore $f|_{L_{\infty}}$ is continuous.
  \item[(b)]
  \emph{The line $L_{\alpha} = \{(x,\alpha x) : x \in \mathbb{R} \}$
  for some $\alpha \in \mathbb{R}$.}
  $f|_{L_{\alpha}}(x,y)$ is continuous on $L_{\alpha} - \{(0,0)\}$.
  \begin{equation*}
    f|_{L_{\alpha}}(x,y) =
    f|_{L_{\alpha}}(x,\alpha x) =
    \begin{cases}
      0                                   & \text{if $(x,y) = (0,0)$} \\
      \frac{\alpha^2 x}{1 + \alpha^4 x^2} & \text{if $(x,y) \neq (0,0)$}.
    \end{cases}
  \end{equation*}
  So
  \[
    \lim_{(x,y) \to (0,0)} f|_{L_{\alpha}}(x,y)
    = \lim_{x \to 0} \frac{\alpha^2 x}{1 + \alpha^4 x^2}
    = 0
    = f(0,0),
  \]
  or $f|_{L_{\alpha}}(x,y)$ is continuous at $(0,0)$.
  Therefore, $f|_{L_{\alpha}}(x,y)$ is continuous on $L_{\alpha}$.
  \item[(c)]
  \emph{The line $L$ not passing $(0,0)$.}
  It is clear since $f(x,y)$ is continuous on $\mathbb{R}^2 - \{(0,0)\}$.
  \end{enumerate}

\item[(5)]
\emph{The restrictions of $g$ to every straight line
in $\mathbb{R}^2$ is continuous.}
Similar to (4).
  \begin{enumerate}
  \item[(a)]
  \emph{The line $L_{\infty} = \{(0,y) : y \in \mathbb{R} \}$.}
  Hence $g|_{L_{\infty}}(x,y) = 0$ for all $(x,y) \in L_{\infty}$
  (including $(0,0) \in L_{\infty}$).
  Therefore $g|_{L_{\infty}}$ is continuous.
  \item[(b)]
  \emph{The line $L_{\alpha} = \{(x,\alpha x) : x \in \mathbb{R} \}$
  for some $\alpha \in \mathbb{R}$.}
  $g|_{L_{\alpha}}(x,y)$ is continuous on $L_{\alpha} - \{(0,0)\}$.
  \begin{equation*}
    g|_{L_{\alpha}}(x,y) =
    g|_{L_{\alpha}}(x,\alpha x) =
    \begin{cases}
      0                                   & \text{if $(x,y) = (0,0)$} \\
      \frac{\alpha^2 x}{1 + \alpha^6 x^4} & \text{if $(x,y) \neq (0,0)$}.
    \end{cases}
  \end{equation*}
  So
  \[
    \lim_{(x,y) \to (0,0)} g|_{L_{\alpha}}(x,y)
    = \lim_{x \to 0} \frac{\alpha^2 x}{1 + \alpha^6 x^4}
    = 0
    = g(0,0),
  \]
  or $g|_{L_{\alpha}}(x,y)$ is continuous at $(0,0)$.
  Therefore, $g|_{L_{\alpha}}(x,y)$ is continuous on $L_{\alpha}$.
  \item[(c)]
  \emph{The line $L$ not passing $(0,0)$.}
  It is clear since $g(x,y)$ is continuous on $\mathbb{R}^2 - \{(0,0)\}$.
  \end{enumerate}
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.8.}
\emph{Let $f$ be a real uniformly continuous function
on the bounded set $E$ in $\mathbb{R}$.
Prove that $f$ is bounded on $E$.
Show that the conclusion is false
if boundedness of $E$ is omitted from the hypothesis.} \\

The conclusion is false if boundedness of $E$ is omitted from the hypothesis.
For example, $f(x) = x$ on $\mathbb{R}$ is uniformly continuous on $\mathbb{R}$
but $f(\mathbb{R}) = \mathbb{R}$ is unbounded. \\

\emph{Proof (Brute-force).}
\begin{enumerate}
\item[(1)]
Since $f: E \to \mathbb{R}$ is uniformly continuous,
given any $\varepsilon > 0$, there is $\delta > 0$ such that
$\abs{f(x) - f(y)} < \varepsilon$ whenever $\abs{x - y} < \delta$.
In particular, pick $\varepsilon = 1$.
\item[(2)]
By the boundedness of $E$, there is $M > 0$ such that $\abs{x} < M$ for all $x \in E$.
\item[(3)]
For such $\delta > 0$, we construct a covering of $E \subseteq \mathbb{R}$.
Construct a special collection $\mathscr{C}$ of intervals
$$I_{a} =
  \left[ \frac{\delta}{2}a, \frac{\delta}{2}(a+1) \right]
$$
where $a \in \mathbb{Z}$ satisfying
$$\abs{a} < \frac{2M}{\delta} + 1.$$
By construction, $\mathscr{C}$ is a finite covering of $E$.
\item[(4)]
For every interval $I_a$ of the collection $\mathscr{C}$,
pick a point $x_a \in E \bigcap I_a$ if possible.
This process will terminate eventually since $\mathscr{C}$ is a finite.
Collect these representative points as $\mathscr{D} = \{ x_a \}$.
Notice that $\mathscr{D}$ is finite again.
\item[(5)]
Now for any point $x \in E$, $x$ lies in some $I_a$
containing $x_a$.
Both $x$ and $x_a$ are in the same interval and their distance satisfies
$$\abs{x - x_a}
\leq \frac{\delta}{2}
< \delta$$
and thus by (1)
$$\abs{f(x) - f(x_a)} < 1,
\text{ or }
\abs{f(x)} <  1 + \abs{f(x_a)}.$$
\item[(6)]
Let
$$M = 1 + \max_{x_\mathbf{a} \in \mathscr{D}} \abs{f(x_a)}.$$
So given any $x \in E$, $\abs{f(x)} < M$.
\end{enumerate}
$\Box$ \\

\emph{Proof (Heine-Borel Theorem).}
Heine-Borel theorem provides the finiteness property to construct
the boundedness property of $f$.

\begin{enumerate}
\item[(1)]
\emph{Let $E$ be a bounded subset of a metric space $X$.
Show that the closure of $E$ in $X$ is also bounded in $X$.}
$E$ is bounded if $E \subseteq B_X(a;r)$ for some $r > 0$ and some $a \in X$.
(The ball $B_X(a;r)$ is defined to the set of all $x \in X$ such that
$d_X(x, a) < r$.)
Take the closure on the both sides,
$$\overline{E}
\subseteq \overline{B_X(a;r)}
= \{ x \in X : d_X(x, a) \leq r \}
\subseteq B_X(a;2r),$$
or $\overline{E}$ is bounded.

\item[(2)]
Since $f: E \to \mathbb{R}$ is uniformly continuous,
given any $\varepsilon > 0$, there is $\delta > 0$ such that
$\abs{f(x) - f(y)} < \varepsilon$ whenever $\abs{x - y} < \delta$.
In particular, pick $\varepsilon = 1$.

\item[(3)]
For such $\delta > 0$, we construct an open covering of $\overline{E} \subseteq \mathbb{R}$.
Pick a collection $\mathscr{C}$ of open balls
$B(a;\delta) \subseteq \mathbb{R}$
where $a$ runs over all elements of $E$.
$\mathscr{C}$ covers $\overline{E}$ (by the definition of accumulation points).
Since $\overline{E} $ is closed and bounded
(by applying (1) on the boundedness of $E$),
$\overline{E}$ is compact
(Heine-Borel theorem).
That is, there is a finite subcollection $\mathscr{C}'$ of $\mathscr{C}$
also covers $\overline{E}$, say
$$\mathscr{C}'
= \left\{B(a_1;\delta)), B(a_2;\delta), \ldots, B(a_m;\delta) \right\}.$$

\item[(4)]
Given any $x \in E \subseteq \overline{E}$,
there is some $a_i \in E$ $(1 \leq i \leq m)$ such that $x \in B(a_i;\delta)$.
In such ball, $\abs{x - a_i} < \delta$.
By (2), $\abs{f(x) - f(a_i)} < 1$,
or $\abs{f(x)} < 1 + \abs{f(a_i)}$.
Almost done.
Notice that $a_i$ depends on $x$,
and thus we might use finiteness of $\{ a_1, a_2, \ldots, a_m \}$
to remove dependence of $a_i$.

\item[(5)]
Let
$$M = 1 + \max_{1 \leq i \leq m}{\abs{f(a_i)}}.$$
So given any $x \in E$, $\abs{f(x)} < M$.
\end{enumerate}
$\Box$ \\



\textbf{Supplement.}
Exercise about considering the closure.
(Problem 3.5 in H. L. Royden, Real Analysis, 3rd Edition.)
\emph{Let $A = \mathbb{Q} \cap [0,1]$,
and let $\{ I_n\}$ be a finite collection of open intervals covering $A$.
Then $\sum l(I_n) \geq 1$.} \\

\emph{Proof.}
\begin{align*}
1
= m^{*}[0, 1]
= m^{*}\overline{A}
&\leq m^{*}\left( \overline{\bigcup I_n} \right)
= m^{*}\left( \bigcup \overline{I_n} \right) \\
&\leq \sum m^{*}(\overline{I_n})
= \sum l(\overline{I_n})
= \sum l(I_n).
\end{align*}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.9.}
\emph{Show that the requirement in the definition of uniformly continuity
can be rephrased as follows, in terms of diameters of sets:
To every $\varepsilon > 0$ there exists a $\delta > 0$ such that
$\mathrm{diam}f(E) < \varepsilon$ for all $E \subseteq X$ with
$\mathrm{diam}E < \delta$.} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
($\Longrightarrow$)
Given $\varepsilon > 0$.
By Definition 4.18, there exists a $\delta > 0$ such that
\[
  d(f(p),f(q)) < \frac{\varepsilon}{64}
\]
for all $p$ and $q$ in $X$ for which $d(p,q) < \delta$.
Let $E$ be any subset of $X$ satisfying $\mathrm{diam}E < \delta$.
Then for any $p, q \in E$,
\[
  d(p,q) \leq \mathrm{diam}E < \delta.
\]
So that
\[
  d(f(p),f(q)) < \frac{\varepsilon}{64},
\]
or $\frac{\varepsilon}{64}$ is an upper bound of $S = \{d(f(p),f(q)) : p, q \in E\}$.
Hence
\[
  \mathrm{diam}f(E) = \sup S \leq \frac{\varepsilon}{64} < \varepsilon.
\]
(Here we pick ``$\frac{\varepsilon}{64}$'' instead of $\varepsilon$
since we want to get ``$\mathrm{diam}f(E) < \varepsilon$''
instead of $\mathrm{diam}f(E) \leq \varepsilon$.)

\item[(2)]
($\Longleftarrow$)
Easy.
Given $\varepsilon > 0$ there exists a $\delta > 0$ such that
$\mathrm{diam}f(E) < \varepsilon$ for all $E \subseteq X$ with
$\mathrm{diam}E < \delta$.
In particular, for any $p, q \in X$ with $d(p,q) < \delta$,
we can take $E = \{p,q\} \subseteq X$ and its diameter
\[
  \mathrm{diam}E = d(p,q) < \delta.
\]
So that
\[
  d(f(p),f(q)) = \mathrm{diam}f(E) < \varepsilon,
\]
or Definition 4.18 holds.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.10.}
\emph{Complete the details of the following alternative proof of Theorem 4.19
(Let $f$ be a continuous mapping of a compact metric space $X$ into a metric space $Y$.
Then $f$ is uniformly continuous on $X$):
If $f$ is not uniformly continuous,
then for some $\varepsilon > 0$
there are sequences $\{p_n\}$, $\{q_n\}$ in $X$ such that
$d_X(p_n,q_n) \to 0$ but $d_Y(f(p_n),f(q_n)) > \varepsilon$.
Use Theorem 2.37 to obtain a contradiction.} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
(Reductio ad absurdum)
If $f$ were not uniformly continuous,
then for some $\varepsilon > 0$
there are sequences $\{p_n\}$, $\{q_n\}$ in $X$ such that
$d_X(p_n,q_n) \to 0$ but $d_Y(f(p_n),f(q_n)) > \varepsilon$.

\item[(2)]
By Theorem 2.37,
there is a subsequence $\{p_{n_k}\}$ of $\{p_n\}$ such that
$\{p_{n_k}\}$ converges to $p \in X$.
Similar argument to $\{q_n\}$,
we have a subsequence $\{q_{n'_k}\}$ of $\{q_n\}$ converging to $q \in X$.

\item[(3)]
Since
\[
  d_X(p,q)
  \leq d_X(p,p_{n_k}) + d_X(p_{n_k},q_{n'_k}) + d_X(q_{n'_k},q)
  \to 0
\]
(by assumption and (2)) and $d_X(p,q)$ is a constant,
$d_X(p,q) = 0$ or $p = q$.

\item[(4)]
Since $f$ is continuous,
\[
  \lim_{k \to \infty} f(p_{n_k})
  = f(p)
  = f(q)
  = \lim_{k \to \infty} f(q_{n'_k})
\]
or $d_Y(f(p_{n_k}),f(q_{n'_k})) \to 0$,
contrary to the assumption.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.11.}
\emph{Suppose $f$ is a uniformly continuous mapping of a metric space $X$ into a metric space $Y$
and prove that $\{f(x_n)\}$ is a Cauchy sequence in $Y$ for every Cauchy sequence $\{x_n\}$ in $X$.
Use this result to give an alternative proof of the theorem stated in Exercise 4.13.} \\

An alternative proof of Exercise 4.13 will be in Exercise 4.13 itself. \\

\emph{Proof (Definition 4.18).}
Given any Cauchy sequence $\{x_n\}$ in $X$.
\begin{enumerate}
\item[(1)]
Given any $\varepsilon > 0$.
Since $f$ is uniformly continuous, there exists a $\delta > 0$ such that
\[
  d_Y(f(p),f(q)) < \varepsilon
\]
for all $p$ and $q$ in $X$ for which $d_X(p,q) < \delta$.

\item[(2)]
Since $\{x_n\}$ is Cauchy in $X$, for such $\delta > 0$ there is an integer $N$ such that
\[
  d_X(x_n,x_m) < \delta
\]
whenever $n, m \geq N$.

\item[(3)]
By (1)(2),
\[
  d_Y(f(x_n),f(x_m)) < \varepsilon
\]
whenever $n, m \geq N$.
Hence $\{f(x_n)\}$ is Cauchy in $Y$.
\end{enumerate}
$\Box$ \\



\emph{Proof (Exercise 4.9).}
Given any Cauchy sequence $\{x_n\}$ in $X$.
\begin{enumerate}
\item[(1)]
Given any $\varepsilon > 0$.
Since $f$ is uniformly continuous, there exists a $\delta > 0$ such that
$\mathrm{diam}f(E) < \varepsilon$ for all $E \subseteq X$ with
$\mathrm{diam}E < \delta$.

\item[(2)]
Since $\{x_n\}$ is Cauchy in $X$, for such $\delta > 0$ there is an integer $N$ such that
\[
  d_X(x_n,x_m) < \frac{\delta}{64}
\]
whenever $n, m \geq N$.

\item[(3)]
Consider $E = \{ x_N, x_{N+1}, \ldots \}$.
By (2), $\mathrm{diam}E \leq \frac{\delta}{64} < \delta$.
By (1),
\[
  d_Y(f(x_n),f(x_m)) \leq \mathrm{diam}f(E) < \varepsilon
\]
whenever $n, m \geq N$.
Hence $\{f(x_n)\}$ is Cauchy in $Y$.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.12.}
\emph{A uniformly continuous function of a uniformly continuous function
is uniformly continuous. State this more precisely and prove it.} \\

Statement (similar to Theorem 4.7):
\emph{suppose $X$, $Y$, $Z$ are metric space, $E \subseteq X$,
$f$ maps $E$ into $Y$,
$g$ maps the range of $f$, $f(E)$, into $Z$,
and $h$ is the mapping of $E$ into $Z$ defined by
\[
  h(x) = g(f(x)) \:\:\:\:\:\:\:\: (x \in E).
\]
If $f$ is uniformly continuous on $E$ and
$g$ is uniformly continuous on $f(E)$,
then $h$ is uniformly continuous on $E$.} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
Given $\varepsilon > 0$.
Since $g$ is uniformly continuous on $f(E)$,
there exists $\eta > 0$ such that
\[
  d_Z(g(f(p)),g(f(q))) < \varepsilon
  \:\:\text{ if }\:\: d_Y(f(p),f(q)) < \eta
  \:\:\text{ and }\:\: f(p), f(q) \in f(E).
\]

\item[(2)]
Since $f$ is uniformly continuous on $E$,
there exists $\delta > 0$ such that
\[
  d_Y(f(p),f(q)) < \eta
  \:\:\text{ if }\:\: d_X(p,q) < \delta
  \:\:\text{ and }\:\: p, q \in E.
\]

\item[(3)]
By (1)(2),
\[
  d_Z(h(p),h(q)) = d_Z(g(f(p)),g(f(q))) < \varepsilon
\]
if $d_X(p,q) < \delta$ and $p, q \in E$.
Hence $h$ is uniformly continuous on $E$.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.13.}
\emph{Let $E$ be a dense subset of a metric space $X$,
and let $f$ be a uniformly continuous real function defined on $E$.
Prove that $f$ has a continuous extension from $E$ to $X$
(see Exercise 4.5 for terminology).
(Uniqueness follows from Exercise 4.4.)
(Hint:
For each $p \in X$ and each positive integer $n$,
let $V_n(p)$ be the set of all $q \in E$ with $d(p,q) < \frac{1}{n}$.
Use Exercise 4.9 to show that the intersection of the closures of the sets
$f(V_1(p)), f(V_2(p)), \ldots$,
consists of a single point, say $g(p)$, of $\mathbb{R}^1$.
Prove that the function $g$ so define on $X$ is the desired extension of $f$.)
Could the range space $\mathbb{R}^1$ be replaced by $\mathbb{R}^k$?
By any compact metric space?
By any complete metric space?
By any metric space?} \\

\emph{Proof (Hint).}
We prove the case that the range metric space is complete.
\begin{enumerate}
\item[(1)]
Given any $p \in X$. We will extend $f$ on $x = p$.
For any positive integer $n$, let
$V_n(p)$ be the set of all $q \in E$ with $d(p,q) < \frac{1}{n}$.

\item[(2)]
\emph{Show that $\overline{f(V_n(p))} \supseteq \overline{f(V_{n+1}(p))}$.}
By construction, $V_n(p) \supseteq V_{n+1}(p)$.
Thus $f(V_n(p)) \supseteq f(V_{n+1}(p))$
and
\[
  \overline{f(V_n(p))} \supseteq \overline{f(V_{n+1}(p))}.
\]

\item[(3)]
\emph{Show that $\lim_{n \to \infty} \mathrm{diam} \overline{f(V_n(p))} = 0$.}
\begin{enumerate}
  \item[(a)]
  Since $E$ is dense in $X$, $V_n(p) \neq \varnothing$ and thus
  \[
    f(V_n(p)) \neq \varnothing.
  \]
  Especially,
  \[
    \overline{f(V_n(p))} \supseteq f(V_n(p)) \neq \varnothing.
  \]
  Hence $\mathrm{diam}V_n(p)$ and $\mathrm{diam}f(V_n(p))$
  are well-defined.

  \item[(b)]
  By the definition of $V_n(p)$ or $0 \leq \mathrm{diam}V_n(p) \leq \frac{2}{n}$,
  \[
    \lim_{n \to \infty} \mathrm{diam}V_n(p) = 0.
  \]

  \item[(c)]
  By the uniformly continuity of $f$ (Exercise 4.9),
  \[
    \lim_{n \to \infty} \mathrm{diam}f(V_n(p)) = 0.
  \]

  \item[(d)]
  Since $\mathrm{diam} \overline{f(V_n(p))} = \mathrm{diam}f(V_n(p))$ (Theorem 3.10(a)),
  \[
    \lim_{n \to \infty} \mathrm{diam} \overline{f(V_n(p))} = 0.
  \]
\end{enumerate}

\item[(4)]
\emph{Show that there is an integer $N$ such that
$\overline{f(V_n(p))}$ is closed and bounded whenever $n \geq N$.}
\begin{enumerate}
  \item[(a)]
  (Closeness.)
  Each $\overline{f(V_n(p))}$ is closed.

  \item[(b)]
  (Boundedness.)
  Since $\lim_{n \to \infty} \mathrm{diam} \overline{f(V_n(p))} = 0$ by (3),
  there is an integer $N$ such that
  \[
    \mathrm{diam} \overline{f(V_n(p))} \leq \frac{1}{89}
  \]
  whenever $n \geq N$.
  By the definition of diameters of $\overline{f(V_n(p))}$,
  each $\overline{f(V_n(p))}$ is bounded by $\frac{1}{64}$ whenever $n \geq N$.

  \item[(c)]
  \emph{Note.}
  If we apply Exercise 4.8 instead,
  we need extra efforts to generalize Exercise 4.8
  to different range spaces for answering the following questions.
\end{enumerate}

\item[(5)]
By (2)(3)(4) and Exercise 3.21,
\[
  \bigcap_{n=N}^{\infty} \overline{f(V_n(p))}
\]
or
\[
  \bigcap_{n=1}^{\infty} \overline{f(V_n(p))}
\]
consists of exactly one point, say $g(p)$.
This point $g(p)$ is an extension of $f$ at $x = p$.
Clearly, $g(p) = f(p)$ if $p \in E$.

\item[(6)]
\emph{Define
\begin{equation*}
  g(p) =
    \begin{cases}
      \bigcap_{n=1}^{\infty} \overline{f(V_n(p))} = f(p)
        & (p \in E), \\
      \bigcap_{n=1}^{\infty} \overline{f(V_n(p))}
        & (p \not\in E).
    \end{cases}
\end{equation*}
Show that $g$ is uniformly continuous.}
  \begin{enumerate}
  \item[(a)]
  Given any $\varepsilon > 0$.
  Since $f$ is uniformly continuous on $E$,
  there exists $\delta > 0$ such that
  \[
    d(f(p),f(q)) < \frac{\varepsilon}{3} < \varepsilon
  \]
  whenever $d(p,q) < \delta$ and $p, q \in E$.
  We will show that such $\delta$ also holds for $g$.
  Now given any $p, q \in X$ with $d(p,q) < \delta$.

  \item[(b)]
  Since $\mathrm{diam} f(V_n(p)) = \mathrm{diam} \overline{f(V_n(p))}$
  and $\lim_{n \to \infty} \mathrm{diam} \overline{f(V_n(p))} = 0$
  (whether $p \in E$ or not),
  there is an integer $N_1$ such that
  \[
    \mathrm{diam} f(V_n(p)) < \frac{\varepsilon}{3}
  \]
  whenever $n \geq N_1$.
  Similarly,
  there is an integer $N_2$ such that
  \[
    \mathrm{diam} f(V_n(q)) < \frac{\varepsilon}{3}
  \]
  whenever $n \geq N_2$.

  \item[(c)]
  Take an integer $N_3$ satisfying
  \[
    N_3 > \frac{4}{\delta-d(p,q)} > 0.
  \]
  For any $p' \in V_n(p) \neq \varnothing$ and
  $q' \in V_n(q) \neq \varnothing$ as $n \geq N_3$,
  we have
  \begin{align*}
    d(p',q')
    &\leq d(p',p) + d(p,q) + d(q,q') \\
    &\leq \frac{2}{n} + d(p,q) + \frac{2}{n} \\
    &\leq \frac{2}{N_3} + d(p,q) + \frac{2}{N_3} \\
    &< \frac{2(\delta-d(p,q))}{4} + d(p,q) + \frac{2(\delta-d(p,q))}{4} \\
    &= \delta.
  \end{align*}

  \item[(d)]
  Take $N = \max\{N_1,N_2,N_3\}$.
  For any $p' \in V_N(p)$ and $q' \in V_N(p)$,
  we have
  \begin{align*}
    d(g(p),f(p')) &\leq \mathrm{diam} f(V_N(p)) < \frac{\varepsilon}{3}, \\
    d(f(p'),f(q')) &< \frac{\varepsilon}{3}, \\
    d(f(q'),g(q)) &\leq \mathrm{diam} f(V_N(q)) < \frac{\varepsilon}{3}.
  \end{align*}
  Hence
  \begin{align*}
    d(g(p),g(q))
    &\leq
    d(g(p),f(p')) + d(f(p'),f(q')) + d(f(q'),g(q)) \\
    &< \frac{\varepsilon}{3} + \frac{\varepsilon}{3} + \frac{\varepsilon}{3} \\
    &= \varepsilon.
  \end{align*}
  \end{enumerate}

\item[(7)]
\emph{Show that the range space $\mathbb{R}^1$ cannot be replaced by any metric space.}
  \begin{enumerate}
  \item[(a)]
  Take $X = \mathbb{R}$ and $Y = \mathbb{Q}$ with the Euclidean metric.
  Let $E = \mathbb{Q}$ be a dense subset of $X = \mathbb{R}$.
  Define $f: E \to Y$ by
  \[
    f(x) = x.
  \]

  \item[(b)]
  $f$ is uniformly continuous on $E$.

  \item[(c)]
  (Reductio ad absurdum)
  If $f$ were having a continuous extension $g$ on $X$,
  then
  \[
    \lim_{n \to \infty} g(p_n) = g(p)
  \]
  for any sequence $\{p_n\}$ in $X$ such that $p_n \neq p$ and $\lim_{n \to \infty} p_n = p$.

  \item[(d)]
  In particular, for some rational sequence $\{p_n\}$ in $E = \mathbb{Q}$
  converging to $\sqrt{2} \in X$, we have
  \[
    \lim_{n \to \infty} g(p_n)
    = \lim_{n \to \infty} f(p_n)
    = \lim_{n \to \infty} p_n
    = \sqrt{2} = g(p) \in \mathbb{Q},
  \]
  which is absurd.
  \end{enumerate}
\end{enumerate}
$\Box$ \\



\emph{Proof (Exercise 4.11).}
We prove the case that the range metric space is complete.
\begin{enumerate}
\item[(1)]
Given any $p \in X$. We will extend $f$ on $x = p$.
Since $E$ is dense in $X$, there exists a sequence $\{p_n\}$ in $E$ converging to $p$
(whether $p \in E$ or not).

\item[(2)]
Since $E$ is dense in $X$, there exists a sequence $\{p_n\}$ in $E$ converging to $p$
(whether $p \in E$ or not).
Hence $\{p_n\}$ is Cauchy in $E$ (Theorem 3.11(a)).
Since $f$ is uniformly continuous, $\{f(p_n)\}$ is Cauchy.
Since the range space is complete, $\{f(p_n)\}$ converges to a point, say $g(p)$.
This point $g(p)$ is an extension of $f$ at $x = p$.
Clearly, $g(p) = f(p)$ if $p \in E$.

\item[(3)]
\emph{Show that $g(p)$ is well-defined.}
If $\{p'_n\}$ is another sequence in $E$ converging to $p$,
we construct a new sequence $\{p''_n\}$ based on $\{p_n\}$ and $\{p'_n\}$ by
\begin{equation*}
  p''_n =
    \begin{cases}
      p_{\frac{n+1}{2}} & (n \equiv 1 \pmod{2}), \\
      p'_{\frac{n}{2}}  & (n \equiv 0 \pmod{2}).
    \end{cases}
\end{equation*}
Clearly $\{p''_n\}$ also converges to $p$.
So $\{f(p''_n)\}$ converges to a single point.
Note that $\{f(p_n)\}$ and $\{f(p'_n)\}$ are two subsequences of $\{f(p''_n)\}$,
and thus both subsequences converge to the same point.

\item[(4)]
\emph{Define
\begin{equation*}
  g(p) =
    \begin{cases}
      f(p) & (p \in E), \\
      \lim_{n \to \infty} f(p_n)
        & (p \not\in E)
    \end{cases}
\end{equation*}
where $\{p_n\}$ is any sequence in $E$ converging to $p$.
Show that $g$ is uniformly continuous.}
  \begin{enumerate}
  \item[(a)]
  Given any $\varepsilon > 0$.
  Since $f$ is uniformly continuous on $E$,
  there exists $\delta > 0$ such that
  \[
    d(f(p),f(q)) < \frac{\varepsilon}{3} < \varepsilon
  \]
  whenever $d(p,q) < \delta$ and $p, q \in E$.
  We will show that such $\delta$ also holds for $g$.
  Now given any $p, q \in X$ with $d(p,q) < \delta$.

  \item[(b)]
  By (2), there exists a sequence $\{p_n\}$ in $E$ such that $\lim p_n = p$.
  Take an integer $N_1$ such that
  \[
    d(p_n,p) < \frac{\delta - d(p,q)}{2}
  \]
  whenever $n \geq N_1$.
  Similarly, there exists a sequence $\{q_n\}$ in $E$ such that $\lim q_n = q$.
  Take an integer $N_2$ such that
  \[
    d(q_n,q) < \frac{\delta - d(p,q)}{2}
  \]
  whenever $n \geq N_2$.
  Therefore,
  \begin{align*}
    d(p_n,q_n)
    &\leq d(p_n,p) + d(p,q) + d(q,q_n) \\
    &< \frac{\delta - d(p,q)}{2} + d(p,q) + \frac{\delta - d(p,q)}{2} \\
    &= \delta.
  \end{align*}
  whenever $n \geq N_1$ and $n \geq N_2$.

  \item[(c)]
  Since $\lim f(p_n) = g(p)$,
  there is an integer $N_3$ such that
  \[
    d(f(p_n), g(p)) < \frac{\varepsilon}{3}
  \]
  whenever $n \geq N_3$.
  Similarly,
  since $\lim f(q_n) = g(q)$,
  there is an integer $N_4$ such that
  \[
    d(f(q_n), g(q)) < \frac{\varepsilon}{3}
  \]
  whenever $n \geq N_4$.

  \item[(d)]
  Take $N = \max\{N_1,N_2,N_3,N_4\}$, we have
  \begin{align*}
    d(g(p),f(p_N)) & < \frac{\varepsilon}{3}, \\
    d(f(p_N),f(q_N)) &< \frac{\varepsilon}{3}, \\
    d(f(q_N),g(q)) & < \frac{\varepsilon}{3}.
  \end{align*}
  Hence
  \begin{align*}
    d(g(p),g(q))
    &\leq
    d(g(p),f(p_N)) + d(f(p_N),f(q_N)) + d(f(q_N),g(q)) \\
    &< \frac{\varepsilon}{3} + \frac{\varepsilon}{3} + \frac{\varepsilon}{3} \\
    &= \varepsilon.
  \end{align*}
  \end{enumerate}
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.14 (Brouwer's fixed-point theorem).}
\emph{Let $I=[0,1]$ be the closed unit interval.
Suppose $f$ is continuous mapping of $I$ into $I$.
Prove that $f(x) = x$ for at least one $x \in I$.} \\

\emph{Proof (Theorem 4.23).}
Let $g(x) = f(x) - x$ in $I$.

\begin{enumerate}
\item[(1)]
$g(0) = 0$. Take $x = 0$.
\item[(2)]
$g(1) = 0$. Take $x = 1$.
\item[(3)]
Suppose $g(0) \neq 0$ ($f(0) \neq 0$) and $g(1) \neq 0$ ($f(1) \neq 1$).
Since $f: I \to I$, $f(0) > 0$ and $f(1) < 1$. That is, $g(0) > 0$ and $g(1) < 0$.
Applying the intermediate value theorem (Theorem 4.23),
there is a point in $\xi \in (0, 1)$ such that $g(\xi) = 0$.
That is, $f(\xi) = \xi$ for some $\xi \in (0,1)$.
\end{enumerate}
In any case, the conclusion holds.
$\Box$ \\



\textbf{Supplement.} Brouwer's fixed-point theorem.
\begin{enumerate}
  \item[(1)]
    In the $\mathbb{R}^1$, see Exercise 4.14 itself.

  \item[(2)]
    In the $\mathbb{R}^2$, see Exercise 8.29.

  \item[(3)]
    In the $\mathbb{R}^n$,
    every continuous function from a closed ball of a Euclidean space $\mathbb{R}^n$
    into itself has a fixed point (without proof).

  \item[(4)]
    In a Banach space, Schauder fixed-point theorem. \\\\
\end{enumerate}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.15.}
\emph{Call a mapping of $X$ into $Y$ \textbf{open} if $f(V)$ is an open set in $Y$
whenever $V$ is an open set in $X$.
Prove that every continuous open mapping of $\mathbb{R}^1$ into $\mathbb{R}^1$
is monotonic.} \\

In fact, $f$ is strictly monotonic. \\

\emph{Proof.}
\begin{enumerate}
  \item[(1)]
  (Reductio ad absurdum)
  If $f$ were not strictly monotonic,
  then there exist $a < c < b \in \mathbb{R}^1$ such that
  \[
    f(a) \leq f(c) \geq f(b)
  \]
  or
  \[
    f(a) \geq f(c) \leq f(b).
  \]

  \item[(2)]
  In any case, $f$ is a real continuous function on a compact set $[a,b]$.
  By Theorem 4.16,
  there exists $p, q \in [a,b]$ such that
  \begin{align*}
    M &= \sup_{x \in [a,b]}f(x) = f(p), \\
    m &= \inf_{x \in [a,b]}f(x) = f(q).
  \end{align*}

  \item[(3)]
  As $f(a) \leq f(c) \geq f(b)$, we consider where $f$ reaches its maximum value $M$ (by (2)).
  \begin{enumerate}
  \item[(a)]
    $f(a) = M$ or $f(b) = M$. Since $f(a) \leq f(c) \geq f(b)$, by the maximality of $M$,
    $f(c) = M$ or $M \in f((a,b))$.

  \item[(b)]
    $f(a) < M$ and $f(b) < M$. Hence $M \in f((a,b))$ clearly.
  \end{enumerate}
  In any case, $M \in f((a,b))$.
  Note that $f((a,b))$ is open
  since $f$ is an open mapping and $(a,b)$ is open.

  Since $M$ is in an open set $f((a,b))$,
  there exists an open neighborhood $B(M;r) \subseteq f((a,b))$ where $r > 0$.
  Hence
  \[
    M+\frac{r}{64} \in B(M;r) \subseteq f((a,b)),
  \]
  contrary to the maximality of $M$.

  \item[(4)]
  As $f(a) \geq f(c) \leq f(b)$,
  we consider where $f$ reaches its minimum value $m$ (by (2)).
  Similar to (3), we can reach a contradiction again.

  \item[(5)]
  By (3)(4), (1) is absurd, and thus $f$ is strictly monotonic.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.16.}
\emph{Let $[x]$ denote the largest integer contained in $x$, this is,
$[x]$ is a integer such that $x-1 < [x] \leq x$;
and let $(x) = x - [x]$ denote the fractional part of $x$.
What discontinuities do the function $[x]$ and $(x)$ have?} \\

\emph{Proof.}

\begin{enumerate}
\item[(1)]
\emph{The function $[x]$ only has discontinuities at $x \in \mathbb{Z}$.}
  \begin{enumerate}
  \item[(a)]
  For any $p \not\in \mathbb{Z}$,
  there is an integer $n$ such that $n < p < n+1$.
  Given any $\varepsilon > 0$, there is a $\delta = \min\{p-n, (n+1)-p\} > 0$
  such that $\abs{[x] - [p]} < \varepsilon$
  whenever $\abs{x - p} < \delta$.
  In fact, $\abs{x - p} < \delta$ is equivalent to $n < x < n+1$
  and therefore $\abs{[x] - [p]} = \abs{n - n} = 0 < \varepsilon$.
  \item[(b)]
  For any $p \in \mathbb{Z}$,
  $\lim_{x \to p^{+}}[x] = p$ and $\lim_{x \to p^{-}}[x] = p-1$.
  \end{enumerate}
\item[(2)]
\emph{The function $(x)$ only has discontinuities at $x \in \mathbb{Z}$.}
  \begin{enumerate}
  \item[(a)]
  Since $[x]$ is continuous on $\mathbb{R} - \mathbb{Z}$ and
  $x$ is continuous on $\mathbb{R}$, especially on $\mathbb{R} - \mathbb{Z}$,
  $(x) = x - [x]$ is continuous on $\mathbb{R} - \mathbb{Z}$.
  \item[(b)]
  For any $p \in \mathbb{Z}$,
  $\lim_{x \to p^{+}}(x) = 0$ and $\lim_{x \to p^{-}}(x) = 1$.
  \end{enumerate}
\end{enumerate}
$\Box$ \\\\


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.17.}
\emph{Let $f$ be a real function defined on $(a,b)$.
Prove that the set of points at which $f$ has a simple discontinuity is at most countable.
(Hint: Let $E$ be the set on which $f(x-) < f(x+)$.
With each point $x$ of $E$, associate a triple $(p,q,r)$ of rational numbers such that}
\begin{enumerate}
  \item[(a)]
  \emph{$f(x-) < p < f(x+)$,}
  \item[(b)]
  \emph{$a < q < t < x$ implies $f(t) < p$,}
  \item[(c)]
  \emph{$x < t < r < b$ implies $f(t) > p$.}
\end{enumerate}
\emph{The set of all such triples is countable.
Show that each triple is associated with at most one point of $E$.
Deal similarly with the other possible types of simple discontinuities.)} \\

\emph{Proof (Hint).}
\begin{enumerate}
  \item[(1)]
  By Definition 4.26,
  \emph{it suffices to show that each following set is at most countable}
  and thus the union of four sets are at most countable (Corollary to Theorem 2.12).
  \begin{enumerate}
    \item[(a)]
    $E_1 = \{ x : f(x+) > f(x-) \}$,

    \item[(b)]
    $E_2 = \{ x : f(x+) < f(x-) \}$,

    \item[(c)]
    $E_3 = \{ x : f(x) > f(x+) = f(x-) \}$,

    \item[(d)]
    $E_4 = \{ x : f(x) < f(x+) = f(x-) \}$,
  \end{enumerate}

  \item[(2)]
  \emph{Show that with each point $x$ of $E_1$,
  we can associate a triple $(p,q,r)$ of rational numbers such that}
  \begin{enumerate}
    \item[(a)]
    \emph{$f(x-) < p < f(x+)$,}
    \item[(b)]
    \emph{$a < q < t < x$ implies $f(t) < p$,}
    \item[(c)]
    \emph{$x < t < r < b$ implies $f(t) > p$.}
  \end{enumerate}
  \begin{enumerate}
    \item[(i)]
    For (a), as $(f(x-),f(x+))$ is a nonempty open set in $\mathbb{R}$
    and $\mathbb{Q}$ is dense in $\mathbb{R}$,
    there exists a rational number $p \in (f(x-),f(x+))$ or $f(x-) < p < f(x+)$.

    \item[(ii)]
    For (b), since $f(x-)$ exists, for $\varepsilon = p - f(x-) > 0$
    there exists $\delta > 0$ such that
    \[
      f(x-)-\varepsilon < f(t) < f(x-)+\varepsilon
      \:\:\text{ whenever }\:\:
      a < x - \delta < t < x.
    \]
    So
    \[
      f(t) < p
      \:\:\text{ whenever }\:\:
      a < x - \delta < t < x.
    \]
    Since $(x-\delta,x)$ is a nonempty open set in $\mathbb{R}$
    and $\mathbb{Q}$ is dense in $\mathbb{R}$,
    there exists a rational number $q \in (x-\delta,x)$ or $a < x-\delta < q < x$.
    Hence if $a < q < t < x$ we have $f(t) < p$.

    \item[(iii)]
    For (c), similar to (ii).
    Since $f(x+)$ exists, for $\varepsilon = f(x+) - p > 0$
    there exists $\delta > 0$ such that
    \[
      f(x+)-\varepsilon < f(t) < f(x+)+\varepsilon
      \:\:\text{ whenever }\:\:
      x < t < x + \delta < b.
    \]
    So
    \[
      f(t) > p
      \:\:\text{ whenever }\:\:
      x < t < x + \delta < b.
    \]
    Since $(x,x+\delta)$ is a nonempty open set in $\mathbb{R}$
    and $\mathbb{Q}$ is dense in $\mathbb{R}$,
    there exists a rational number $r \in (x,x+\delta)$ or $x < r < x+\delta < b$.
    Hence if $x < t < r < b$ we have $f(t) > p$.
  \end{enumerate}

  \item[(3)]
  \emph{Show that each triple in (2) is associated with at most one point of $E_1$.}
  (Reductio ad absurdum)
  If there were another $x' > x$ such that
  \begin{enumerate}
    \item[(a)]
    $f(x'-) < p < f(x'+)$,
    \item[(b)]
    $a < q < t < x'$ implies $f(t) < p$,
    \item[(c)]
    $x' < t < r < b$ implies $f(t) > p$,
  \end{enumerate}
  then there exists $t_0 \in \mathbb{R}$ satisfying $x < t_0 < x'$
  such that $f(t_0) > p$ (property (c) of $x$) and $f(t_0) < p$ (property (b) of $x'$),
  which is absurd.
  The case $x' < x$ is similar.

  \item[(4)]
  By (2)(3), the set $E_1$ is a subset of a countable set
  \[
    \{ (p,q,r) : (p,q,r) \in \mathbb{Q}^3 \},
  \]
  which is at most countable (Theorem 2.8 and Corollary to Theorem 2.12).
  Similarly, $E_2$ is at most countable.

  \item[(5)]
  Similar to (2), for each point $x$ of $E_3$,
  we can associate a triple $(p,q,r)$ of rational numbers such that
  \begin{enumerate}
    \item[(a)]
    $f(x) > p > f(x+) = f(x-)$,
    \item[(b)]
    $a < q < t < x$ implies $f(t) < p$,
    \item[(c)]
    $x < t < r < b$ implies $f(t) < p$.
  \end{enumerate}

  \item[(6)]
  \emph{Show that each triple in (5) is associated with at most one point of $E_3$.}
  (Reductio ad absurdum)
  If there were another $x' > x$ such that
  \begin{enumerate}
    \item[(a)]
    $f(x') > p > f(x'+) = f(x'-)$,
    \item[(b)]
    $a < q < t < x'$ implies $f(t) < p$,
    \item[(c)]
    $x' < t < r < b$ implies $f(t) < p$,
  \end{enumerate}
  then $f(x) < p$ (property (b) of $x'$), which is absurd.
  The case $x' < x$ is similar.

  \item[(7)]
  By (5)(6), the set $E_3$ is a subset of a countable set
  \[
    \{ (p,q,r) : (p,q,r) \in \mathbb{Q}^3 \},
  \]
  which is at most countable (Theorem 2.8 and Corollary to Theorem 2.12).
  Similarly, $E_4$ is at most countable.

  \item[(8)]
  By (4)(7), all $E_j$ ($j=1,2,3,4$) are at most countable.
  Hence the set of points at which $f$ has a simple discontinuity is at most countable.
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.18 (Thomae's function).}
\emph{Every rational $x$ can be written in the form $x = \frac{m}{n}$, where $n > 0$,
and $m$ and $n$ are integers without any common divisors.
When $x = 0$, we take $n = 1$.
Consider the function $f$ defined on $\mathbb{R}^1$ by
\begin{equation*}
  f(x) =
    \begin{cases}
      0           & (\text{$x$ irrational}), \\
      \frac{1}{n} & (x = \frac{m}{n}).
    \end{cases}
\end{equation*}
Prove that $f$ is continuous at every irrational point,
and that $f$ has a simple discontinuity at every rational point.} \\

\emph{Proof.}

\begin{enumerate}
\item[(1)]
\emph{Show that $f$ has period $1$.}
  \begin{enumerate}
  \item[(a)]
  As $x$ is irrational, $x+1$ is irrational too.
  Hence $f(x+1) = 0 = f(x)$.

  \item[(b)]
  As $x = \frac{m}{n} \in \mathbb{Q}$, where $n > 0$,
  and $m$ and $n$ are integers without any common divisors.
  \[
    x+1 = \frac{m+n}{n} \in \mathbb{Q},
  \]
  where $n > 0$, and $\gcd(m+n,n) = \gcd(m,n) = 1$.
  Hence $f(x+1) = \frac{1}{n} = f(x)$.
  \end{enumerate}
  In any case, $f(x+1) = f(x)$ for any $x \in \mathbb{R}$.

\item[(2)]
\emph{Show that $f(p+) = f(p-) = 0$ for any $p \in \mathbb{R}$.}
\begin{enumerate}
  \item[(a)]
  By (1), we might assume $p \in [0,1]$.
  For the edge cases $f(0-)$ and $f(1+)$,
  note that $f(0-) = f(1-)$ and $f(1+) = f(0+)$.

  \item[(b)]
  Now given any point $p \in [0,1]$.
  Given $\varepsilon > 0$,
  it suffices to find $\delta > 0$ such that
  \[
    \abs{ f(x) - 0 } < \varepsilon
    \:\:\text{ whenever }\:\:
    p < x < p + \delta.
  \]
  (The case $f(p-) = 0$ is similar.)

  \item[(c)]
  For such $\varepsilon > 0$,
  there is an integer $N \geq s$ such that
  \[
    \frac{1}{N} < \varepsilon.
  \]
  Hence
  \[
    E = \left\{ \frac{m}{n} \in [0,1] : n \leq N
      \text{ where $\frac{m}{n}$ is defined as this exercise} \right\}
      - \left\{ p \right\}
  \]
  is finite since $m$ and $n$ are satisfying the relation $0 \leq m \leq n \leq N$
  and there are only finitely many pairs of $(m,n)$.

  \item[(d)]
  Now we can take
  \[
    \delta = \min\{ |q - p| : q \in E \} > 0.
  \]
  As $p < x < p + \delta$,
  $\abs{ f(x) - 0 } = 0 < \varepsilon$ if $x$ is irrational;
  \[
    \abs{ f(x) - 0 } < \frac{1}{N} < \varepsilon
  \]
  if $x$ is rational.
  (Note that $x \not\in E$ by the construction of $\delta$
  and thus the denominator of $x$ is $> N$.)
  In any case, $\abs{ f(x) - 0 } < \varepsilon$.
  \end{enumerate}

\item[(3)]
Since $f(x) = 0$ if $x \in \mathbb{R} - \mathbb{Q}$
and $f(x) \neq 0$ if $x \in \mathbb{Q}$,
$f$ is continuous at every irrational point
and $f$ has a simple discontinuity at every rational point (by (2)).
\end{enumerate}
$\Box$ \\



\emph{Note.}
\begin{enumerate}
\item[(1)]
\emph{$f$ is nowhere differentiable.}
  \begin{enumerate}
  \item[(a)]
  For any rational number, this follows from discontinuity.

  \item[(b)]
  For any irrational number $x$, given $\varepsilon = \frac{1}{64} > 0$,
  \emph{it suffices to show that for any $\delta > 0$, there exists $x < t < x + \delta$ such that
  \[
    \frac{f(t)-f(x)}{t-x} > \frac{1}{64}.
  \]}

  \item[(c)]
  It is clear to find $t$ in $\mathbb{Q}$.
  For such $\delta > 0$, there is an integer $n$ such that
  \[
    n > \frac{1}{\delta} > 0.
  \]
  For such $n > 0$, there is an integer $m$ such that
  \[
    m-1 < nx < m.
  \]
  ($m-1 \leq nx < m$ is true trivially and notice that the equality does not hold
  since $x$ is irrational.)
  Take
  \[
    t = \frac{m}{n}.
  \]
  So that
  \[
    x < t < x + \frac{1}{n} < x + \delta.
  \]

  \item[(d)]
  Let $\gcd(m,n) = g \geq 1$.
  Then
  \[
    f(t) = \frac{1}{\frac{n}{g}} = \frac{g}{n} \geq \frac{1}{n}
  \]
  and thus
  \[
    \frac{f(t)-f(x)}{t-x} > \frac{\frac{1}{n}}{\frac{1}{n}} = 1 > \frac{1}{64}.
  \]
  \end{enumerate}
  $\Box$ \\

\item[(2)]
\emph{$f \in \mathscr{R}$ on any bounded interval $[a,b]$ and $\int_{a}^{b} f dx = 0$.}
To prove this, use the similar argument in Exercise 6.6. \\\\
\end{enumerate}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.19.}
\emph{Suppose $f$ is a real function with domain $\mathbb{R}^1$
which has the intermediate value property:
If $f(a) < c < f(b)$, then $f(x)=c$ for some $x$ between $a$ and $b$.
Suppose also, for every rational $r$,
that the set of all $x$ with $f(x)=r$ is closed.
Prove that $f$ is continuous.
(Hint: If $x_n \to x_0$ but $f(x_n) > r > f(x_0)$ for some $r$ and all $n$,
then $f(t_n) = r$ for some $t_n$ between $x_0$ and $x_n$;
thus $t_n \to x_0$.
Find a contradiction.
(N. J. Fine, Amer. Math. Monthly, vol. 73, 1966, p.782.))} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
(Reductio ad absurdum)
If $f$ were not continuous at $x = x_0$, then there exists a sequence $\{x_n\}$ in $\mathbb{R}^1$
such that $\{f(x_n)\}$ in $\mathbb{R}^1$ not converging to $f(x_0)$.
So there exists $\varepsilon_0 > 0$ and a subsequence $\{x_{n'}\}$ of $\{x_n\}$
such that
\[
  \abs{ f\left(x_{n'}\right) - f(x_0) } \geq \varepsilon_0
\]
for all $n'$.
Hence
\[
  f\left(x_{n'}\right) \geq f(x_0) + \varepsilon_0
  \:\: \text{ or } \:\:
  f\left(x_{n'}\right) \leq f(x_0) - \varepsilon_0
\]
for all $n'$.

\item[(2)]
Since there are infinitely many $\{x_{n'}\}$,
there are only two possible cases:
  \begin{enumerate}
  \item[(a)]
  There is a subsequence $\{x_{n''}\}$ of $\{x_{n'}\}$
  such that
  $f\left(x_{n''}\right) \geq f(x_0) + \varepsilon_0$
  for all $n''$.

  \item[(b)]
  There is a subsequence $\{x_{n''}\}$ of $\{x_{n'}\}$
  such that
  $f\left(x_{n''}\right) \leq f(x_0) - \varepsilon_0$
  for all $n''$.
  \end{enumerate}
In any case, we may assume that there exists $\varepsilon_0 > 0$
and a sequence $\{x_n\}$
such that
\[
  f(x_{n}) \geq f(x_0) + \varepsilon_0
\]
for all $n$.
(The case that $f(x_{n}) \leq f(x_0) - \varepsilon_0$ is similar.)

\item[(3)]
Pick any rational number $r \in (f(x_0), f(x_0) + \varepsilon_0)$
since $\mathbb{Q}$ is dense in $\mathbb{R}$.
(In fact, $\mathbb{Q}$ can be replaced by any dense subset of $\mathbb{R}$ in this exercise.)
Since
\[
  f(x_n) \geq f(x_0) + \varepsilon_0 > r > f(x_0),
\]
by the intermediate value property,
there exists some $t_n$ between $x_0$ and $x_n$
such that $f(t_n) = r$.

\item[(4)]
Let $E = \{ t : f(t) = r \}$ be a closed set
(since $r \in \mathbb{Q}$ and the assumption).
Hence $t_n \in E$ for all $n$ (by (3)).

\item[(5)]
$\lim t_n = x_0$ since $\lim x_n = x_0$.
Hence $x_0$ is a limit point of $E$.
(Note that $x_0 \not\in E$ since $f(x_0) < r$ (by (3)).)
Since $E$ is closed, $x_0 \in E$ or $f(x_0) = r$, which is absurd.
\end{enumerate}
$\Box$ \\

\textbf{Supplement.}
\emph{Suppose $f$ is a differentiable real function with domain $\mathbb{R}^1$.
Suppose for every rational $r$,
that the set of all $x$ with $f'(x)=r$ is closed.
Prove that $f'$ is continuous.}
Theorem 5.12 (Darboux's theorem) and Exercise 4.19 itself implies all.
\\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.20.}
\emph{If $E$ is a nonempty subset of a metric space $X$,
define the distance from $x \in X$ to $E$ by
\[
  \rho_E(x) = \inf_{z \in E} d(x,z).
\]}
\begin{enumerate}
  \item[(a)]
  \emph{Prove that $\rho_E(x) = 0$ if and only if $x \in \overline{E}$.}

  \item[(b)]
  \emph{Prove that $\rho_E(x)$ is a uniformly continuous function on $X$,
  by showing that
  \[
    \abs{ \rho_E(x) - \rho_E(y) } \leq d(x,y)
  \]
  for all $x \in X$, $y \in X$.
  (Hint: $\rho_E(x) \leq d(x,z) \leq d(x,y) + d(y,z)$, so that
  \[
    \rho_E(x) \leq d(x,y) + \rho_E(y).)
  \]}
\end{enumerate}

\emph{Proof of (a).}
Hence
\begin{align*}
  \rho_E(x) > 0
  &\Longleftrightarrow
  \inf_{z \in E} d(x,z) > 0 \\
  &\Longleftrightarrow
  \exists \: r > 0 \text{ such that } B(x;r) \cap E = \varnothing \\
  &\Longleftrightarrow
  x \not\in \overline{E}.
\end{align*}
$\Box$ \\

\emph{Proof of (b) (Hint).}
Given any $x \in X$, $y \in X$.
For any $z \in E$, we have
\[
  \rho_E(x) \leq d(x,z) \leq d(x,y) + d(y,z).
\]
$\rho_E(x) - d(x,y)$ is a lower bound of the set $\{ d(y,z) : z \in E \}$.
So that
\[
  \rho_E(x) \leq d(x,y) + \rho_E(y).
\]
Similarly,
\[
  \rho_E(y) \leq d(x,y) + \rho_E(x).
\]
Hence
\[
  \abs{ \rho_E(x) - \rho_E(y) } \leq d(x,y),
\]
or $\rho_E(x)$ is uniformly continuous on $X$
(by taking $\delta = \varepsilon > 0$ in Definition 4.18).
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.21.}



PLACEHOLDER \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.22.}



PLACEHOLDER \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.23.}
\emph{A real-valued function $f$ defined in $(a,b)$
is said to be \textbf{convex} if
$$f(\lambda x + (1 - \lambda) y) \leq \lambda f(x) + (1 - \lambda) f(y)$$
whenever $a < x < b$, $a < y < b$, $0 < \lambda < 1$.
Prove that every convex function is continuous.
Prove that every increasing convex function of a convex function is convex.
(For example, if $f$ is convex, so is $e^f$.)} \\

\emph{If $f$ is convex in $(a,b)$ and if $a < s < t < u < b$,
show that
$$\frac{f(t)-f(s)}{t-s}
\leq \frac{f(u)-f(s)}{u-s}
\leq \frac{f(u)-f(t)}{u-t}.$$} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
\emph{Show that
$\frac{f(t)-f(s)}{t-s}
\leq \frac{f(u)-f(s)}{u-s}
\leq \frac{f(u)-f(t)}{u-t}$.}
Since
\begin{align*}
  t
  &= \frac{t-s}{u-s} u + \left( 1-\frac{t-s}{u-s} \right) s \\
  &= \left( 1-\frac{u-t}{u-s} \right) u + \frac{u-t}{u-s} s
\end{align*}
and $0 < \frac{t-s}{u-s}, \frac{u-t}{u-s} < 1$,
by the convexity of $f$ we have
\begin{align*}
  f(t)
  &\leq \frac{t-s}{u-s} f(u) + \left( 1-\frac{t-s}{u-s} \right) f(s), \\
  f(t)
  &\leq \left( 1-\frac{u-t}{u-s} \right) f(u) + \frac{u-t}{u-s} f(s).
\end{align*}
It is equivalent to
$$\frac{f(t)-f(s)}{t-s}
\leq \frac{f(u)-f(s)}{u-s}
\leq \frac{f(u)-f(t)}{u-t}.$$
$\Box$\\
\item[(2)]
\emph{If $x, y, x', y'$ are points of $(a,b)$
with $x \leq x' < y'$ and $x < y \leq y'$,
then the chord over $(x',y')$ has larger slope than the chord over $(x,y)$; that is,
$$\frac{f(y)-f(x)}{y-x} \leq \frac{f(y')-f(x')}{y'-x'}.$$}
It is a corollary to (1).
\item[(3)]
\emph{Show that $f$ is continuous.}
Let $[c,d] \subseteq (a,b)$.
Then by (2),
$$\frac{f(c)-f(a)}{c-a}
\leq \frac{f(y) - f(x)}{y - x}
\leq \frac{f(b)-f(d)}{b-d}$$
for $x, y$ in $[c,d]$.
Thus $|f(y) - f(x)| \leq M|y - x|$ in $[c,d]$
(where $M = \max\left( |\frac{f(c)-f(a)}{c-a}|, |\frac{f(b)-f(d)}{b-d}| \right)$),
and so $f$ is absolutely continuous
on each closed subinterval of $(a,b)$.
Especially, $f$ is continuous.
\item[(4)]
\emph{Let $f$ be a convex function,
$g$ be an increasing convex function,
and $h = g \circ f$.
Show that $h$ is convex.}
\begin{align*}
f(\lambda x + (1-\lambda) y)
&\leq \lambda f(x) + (1-\lambda) f(y),
  &\text{(Convexity of $f$)} \\
g(f(\lambda x + (1-\lambda) y))
&\leq g(\lambda f(x) + (1-\lambda) f(y))
  &\text{(Increasing of $g$)} \\
&\leq \lambda g(f(x)) + (1-\lambda) g(f(y)),
  &\text{(Convexity of $g$)} \\
h(\lambda x + (1-\lambda) y)
&\leq \lambda h(x) + (1-\lambda) h(y).
\end{align*}
\end{enumerate}
$\Box$ \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.24.}
\emph{Assume that $f$ is a continuous real function defined in $(a,b)$
such that
$$f\left( \frac{x+y}{2} \right)
\leq \frac{f(x)+f(y)}{2}$$
for all $x, y \in (a,b)$.
Prove that $f$ is convex.} \\

\emph{Proof.}
\begin{enumerate}
\item[(1)]
\emph{Show that
$$f\left( \frac{x_1 + \cdots + x_n}{n} \right)
\leq \frac{f(x_1) + \cdots + f(x_n)}{n}$$
whenever $a < x_i < b$ $(1 \leq i \leq n)$.}
Apply Cauchy induction and use the same argument in proving the AM-GM inequality.
As $n = 1, 2$, the inequality holds by assumption.
Suppose $n = 2^k$ $(k \geq 1)$ the inequality holds.
As $n = 2^{k+1}$,
\begin{align*}
&f\left( \frac{x_1 + \cdots + x_{2^{k+1}}}{2^{k+1}} \right) \\
=& f\left( \frac{1}{2} \left(\frac{x_1 + \cdots + x_{2^k}}{2^k}
  + \frac{x_{2^k+1} + \cdots + x_{2^{k+1}}}{2^k}\right) \right) \\
\leq& \frac{1}{2}
  \left(
    f\left(\frac{x_1 + \cdots + x_{2^k}}{2^k} \right)
    + f\left(\frac{x_{2^k+1} + \cdots + x_{2^{k+1}}}{2^k} \right)
  \right) \\
\leq& \frac{1}{2}
  \left(
    \frac{f(x_1) + \cdots + f(x_{2^k})}{2^k}
    + \frac{f(x_{2^k+1}) + \cdots + f(x_{2^{k+1}})}{2^k}
  \right) \\
=& \frac{f(x_1) + \cdots + f(x_{2^k}) + f(x_{2^k+1}) + \cdots + f(x_{2^{k+1}})}{2^{k+1}} \\
=& \frac{f(x_1) + \cdots + f(x_{2^{k+1}})}{2^{k+1}}.
\end{align*}
As $n$ is not a power of $2$,
then it is certainly less than some natural power of $2$, say $n < 2^m$ for some $m$.
Let
$$x_{n+1} = \cdots = x_{2^m} = \frac{x_1 + \cdots + x_n}{n} = \alpha.$$
Then by the induction hypothesis,
\begin{align*}
  f(\alpha)
  &= f\left( \frac{x_1 + \cdots + x_n + \alpha + \cdots + \alpha}{2^m} \right) \\
  &\leq \frac{f(x_1) + \cdots + f(x_n) + f(\alpha) + \cdots + f(\alpha)}{2^m} \\
  &\leq \frac{f(x_1) + \cdots + f(x_n) + (2^m - n)f(\alpha)}{2^m}, \\
  2^m f(\alpha)
  &\leq f(x_1) + \cdots + f(x_n) + (2^m - n)f(\alpha), \\
  n f(\alpha)
  &\leq f(x_1) + \cdots + f(x_n),
\end{align*}
or $f\left( \frac{1}{n} (x_1 + \cdots + x_n) \right)
\leq \frac{1}{n}(f(x_1) + \cdots f(x_n))$.
\item[(2)]
Hence,
$$f(\lambda x + (1 - \lambda) y) \leq \lambda f(x) + (1 - \lambda) f(y)$$
for any rational $\lambda$ in $(0,1)$.
(Given any positive integers $p < q$,
put $n = q$,
$x_1 = \cdots = x_p = x$
and $x_{p+1} = \cdots = x_n = y$ in (1).)
\item[(3)]
Given any real $\lambda \in (0,1)$,
there is a sequence of rational numbers $\{r_n\} \subseteq (0, 1)$
such that $r_n \to \lambda$.
By (2),
$$f(r_n x + (1 - r_n) y) \leq r_n f(x) + (1 - r_n) f(y)$$
for any rational $r_n$ in $(0,1)$.
Taking limit on the both sides and using the continuity of $f$,
we have
$$f(\lambda x + (1 - \lambda) y) \leq \lambda f(x) + (1 - \lambda) f(y).$$
\end{enumerate}
$\Box$ \\

\emph{Proof (Reductio ad absurdum).}
If $f$ were not convex,
then there is a subinterval $[c,d] \subseteq (a,b)$
such that
$$\frac{f(d)-f(c)}{d-c} < \frac{f(x_0)-f(c)}{x_0-c}$$
for some $x_0 \in [c, d]$.
Let
$$g(x) = f(x)-f(c) - \frac{f(d)-f(c)}{d-c}(x - c)$$
for $x \in [c,d]$.
Therefore,
\begin{enumerate}
\item[(1)]
$g(x)$ is continuous and midpoint convex.
\item[(2)]
$g(c) = g(d) = 0$.
\item[(3)]
Let $M = \sup\{g(x) : x \in [c,d]\}$.
$\infty > M > 0$ due to the continuity of $g$ and the existence of $x_0$.
And let $\xi = \inf \{ x \in [c,d] : g(x) = M \}$.
By the continuity of $g$, $g(\xi) = M$.
$\xi \in (c,d)$ by (2).
\item[(4)]
Since $(c,d)$ is open, there is $h > 0$ such that $(\xi-h,\xi+h) \subseteq (c,d)$.
By the minimality of $\xi$ and $M$, $g(\xi-h) < g(\xi)$ and $g(\xi+h) \leq g(\xi)$.
\end{enumerate}
Therefore,
\begin{align*}
g(\xi-h) + g(\xi+h)
&< 2 g(\xi), \\
\frac{g(\xi-h) + g(\xi+h)}{2}
&< g(h) \\
&= g\left( \frac{(\xi-h) + (\xi+h)}{2} \right),
\end{align*}
contrary to the midpoint convexity of $g$.
$\Box$ \\

The result becomes false if ``continuity of $f$'' is omitted. \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.25.}
\emph{If $A \subset \mathbb{R}^k$ and $B \subset \mathbb{R}^k$,
define $A+B$ to be the set of all sums $\mathbf{x}+\mathbf{y}$ with
$\mathbf{x} \in A$, $\mathbf{y} \in B$.}

\begin{enumerate}
\item[(a)]
\emph{If $K$ is compact and $C$ is closed in $\mathbb{R}^k$,
prove that $K+C$ is closed.
(Hint: Take $\mathbf{z} \notin K+C$,
put $F = \mathbf{z}-C$,
the set of all $\mathbf{z}-\mathbf{y}$ with $\mathbf{y} \in C$.
Then $K$ and $F$ are disjoint.
Choose $\delta$ as in Exercise 4.21.
Show that the open ball with center $\mathbf{z}$ and radius $\delta$ does not intersect $K+C$.)}
\item[(b)]
\emph{Let $\alpha$ be an irrational real number.
Let $C_1$ be the set of all integers,
let $C_2$ be the set of all $n \alpha$ with $n \in C_1$.
Show that $C_1$ and $C_2$ are closed subsets of $\mathbb{R}^1$
whose sum $C_1 + C_2$ is not closed,
by showing that $C_1 + C_2$ is a countable dense subset of $\mathbb{R}^1$.} \\
\end{enumerate}

\emph{Proof.}
TODO. \\\\



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\textbf{Exercise 4.26.}
\emph{Suppose $X$, $Y$, $Z$ are metric spaces, and $Y$ is compact.
Let $f$ map $X$ into $Y$,
let $g$ be a continuous one-to-one mapping of $Y$ into $Z$,
and put $h(x) = g(f(x))$ for $x \in X$.} \\

\emph{Prove that $f$ is uniformly continuous if $h$ is uniformly continuous.
(Hint: $g^{-1}$ has compact domain $g(Y)$, and $f(x) = g^{-1}(h(x))$.)} \\

\emph{Prove also that $f$ is continuous if $h$ is continuous. } \\

\emph{Show (by modifying Example 4.21, or by finding a different example) that
the compactness of $Y$ cannot be omitted from the hypotheses,
even when $X$ and $Z$ are compact.} \\

\emph{Proof.}
TODO. \\\\



\end{document}